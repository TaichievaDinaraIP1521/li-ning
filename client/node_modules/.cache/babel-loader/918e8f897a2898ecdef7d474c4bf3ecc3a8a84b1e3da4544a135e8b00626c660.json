{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{FiShoppingCart,FiMenu,FiX,FiUser,FiLogOut}from'react-icons/fi';import{Link,useLocation,useNavigate}from'react-router-dom';import'../styles/main.css';import'../styles/header.css';import{useCart}from'../context/CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Header(){const[isMenuOpen,setIsMenuOpen]=useState(false);const{user,logout,cartItems,isAuthenticated}=useCart();const navigate=useNavigate();const headerRef=useRef(null);const location=useLocation();const handleLogout=()=>{logout();navigate('/');closeMenu();};const toggleMenu=()=>setIsMenuOpen(!isMenuOpen);const closeMenu=()=>setIsMenuOpen(false);// Закрытие меню при клике вне области\nuseEffect(()=>{const handleClickOutside=event=>{if(headerRef.current&&!headerRef.current.contains(event.target)){closeMenu();}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// Закрытие меню при смене маршрута\nuseEffect(()=>{closeMenu();},[location]);// Подсчёт товаров в корзине\nconst totalCartCount=(cartItems===null||cartItems===void 0?void 0:cartItems.reduce((sum,item)=>sum+item.quantity,0))||0;return/*#__PURE__*/_jsx(\"header\",{className:\"header\",ref:headerRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-container container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"mobile-menu-button\",onClick:toggleMenu,\"aria-label\":isMenuOpen?\"Закрыть меню\":\"Открыть меню\",\"aria-expanded\":isMenuOpen,children:isMenuOpen?/*#__PURE__*/_jsx(FiX,{size:24}):/*#__PURE__*/_jsx(FiMenu,{size:24})}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"logo\",onClick:closeMenu,children:\"LI-NING\"}),/*#__PURE__*/_jsxs(\"div\",{className:`nav-content ${isMenuOpen?'active':''}`,children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"nav-menu\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:`nav-link ${location.pathname==='/'?'active':''}`,onClick:closeMenu,children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"}),/*#__PURE__*/_jsx(Link,{to:\"/about\",className:`nav-link ${location.pathname==='/about'?'active':''}`,onClick:closeMenu,children:\"\\u041E \\u043D\\u0430\\u0441\"}),/*#__PURE__*/_jsx(Link,{to:\"/auth\",className:`nav-link ${location.pathname==='/auth'?'active':''}`,onClick:closeMenu,children:\"\\u0412\\u0445\\u043E\\u0434\"}),(user===null||user===void 0?void 0:user.isAdmin)&&/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:`nav-link ${location.pathname==='/admin'?'active':''}`,onClick:closeMenu,children:\"\\u0410\\u0434\\u043C\\u0438\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u044C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/cart\",className:\"cart-button\",onClick:closeMenu,\"aria-label\":\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\",children:[/*#__PURE__*/_jsx(FiShoppingCart,{size:20}),/*#__PURE__*/_jsx(\"span\",{className:\"cart-text\",children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"}),totalCartCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"cart-count\",children:totalCartCount})]}),isAuthenticated?/*#__PURE__*/_jsx(\"div\",{className:\"profile-dropdown\",children:/*#__PURE__*/_jsx(Link,{to:\"/auth\",className:\"profile-button\",onClick:closeMenu,children:/*#__PURE__*/_jsx(FiUser,{size:20})})}):/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"profile-button\",onClick:closeMenu,\"aria-label\":\"\\u0412\\u043E\\u0439\\u0442\\u0438\",children:/*#__PURE__*/_jsx(FiUser,{size:20})})]})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","useRef","FiShoppingCart","FiMenu","FiX","FiUser","FiLogOut","Link","useLocation","useNavigate","useCart","jsx","_jsx","jsxs","_jsxs","Header","isMenuOpen","setIsMenuOpen","user","logout","cartItems","isAuthenticated","navigate","headerRef","location","handleLogout","closeMenu","toggleMenu","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","totalCartCount","reduce","sum","item","quantity","className","ref","children","onClick","size","to","pathname","isAdmin"],"sources":["C:/Users/dinat/OneDrive/Рабочий стол/lining/client/src/components/Header.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { FiShoppingCart, FiMenu, FiX, FiUser, FiLogOut } from 'react-icons/fi';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport '../styles/main.css';\r\nimport '../styles/header.css';\r\nimport { useCart } from '../context/CartContext';\r\n\r\nexport default function Header() {\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const { user, logout, cartItems, isAuthenticated } = useCart();\r\n  const navigate = useNavigate();\r\n  const headerRef = useRef(null);\r\n  const location = useLocation();\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    navigate('/');\r\n    closeMenu();\r\n  };\r\n\r\n  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);\r\n  const closeMenu = () => setIsMenuOpen(false);\r\n\r\n  // Закрытие меню при клике вне области\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (headerRef.current && !headerRef.current.contains(event.target)) {\r\n        closeMenu();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  // Закрытие меню при смене маршрута\r\n  useEffect(() => {\r\n    closeMenu();\r\n  }, [location]);\r\n\r\n  // Подсчёт товаров в корзине\r\n  const totalCartCount = cartItems?.reduce((sum, item) => sum + item.quantity, 0) || 0;\r\n\r\n  return (\r\n    <header className=\"header\" ref={headerRef}>\r\n      <div className=\"header-container container\">\r\n        {/* Мобильное меню */}\r\n        <button \r\n          className=\"mobile-menu-button\" \r\n          onClick={toggleMenu}\r\n          aria-label={isMenuOpen ? \"Закрыть меню\" : \"Открыть меню\"}\r\n          aria-expanded={isMenuOpen}\r\n        >\r\n          {isMenuOpen ? <FiX size={24} /> : <FiMenu size={24} />}\r\n        </button>\r\n\r\n        {/* Логотип */}\r\n        <Link to=\"/\" className=\"logo\" onClick={closeMenu}>\r\n          LI-NING\r\n        </Link>\r\n        \r\n        {/* Навигация */}\r\n        <div className={`nav-content ${isMenuOpen ? 'active' : ''}`}>\r\n          <nav className=\"nav-menu\">\r\n            <Link \r\n              to=\"/\" \r\n              className={`nav-link ${location.pathname === '/' ? 'active' : ''}`} \r\n              onClick={closeMenu}\r\n            >\r\n              Главная\r\n            </Link>\r\n            <Link \r\n              to=\"/about\" \r\n              className={`nav-link ${location.pathname === '/about' ? 'active' : ''}`} \r\n              onClick={closeMenu}\r\n            >\r\n              О нас\r\n            </Link>\r\n            <Link \r\n              to=\"/auth\" \r\n              className={`nav-link ${location.pathname === '/auth' ? 'active' : ''}`} \r\n              onClick={closeMenu}\r\n            >\r\n              Вход\r\n            </Link>\r\n            {user?.isAdmin && (\r\n              <Link \r\n                to=\"/admin\" \r\n                className={`nav-link ${location.pathname === '/admin' ? 'active' : ''}`} \r\n                onClick={closeMenu}\r\n              >\r\n                Админ-панель\r\n              </Link>\r\n            )}\r\n          </nav>\r\n\r\n          {/* Корзина и профиль */}\r\n          <div className=\"header-actions\">\r\n            <Link to=\"/cart\" className=\"cart-button\" onClick={closeMenu} aria-label=\"Корзина\">\r\n              <FiShoppingCart size={20} />\r\n              <span className=\"cart-text\">Корзина</span>\r\n              {totalCartCount > 0 && (\r\n                <span className=\"cart-count\">{totalCartCount}</span>\r\n              )}\r\n            </Link>\r\n            \r\n                {/* Переход в профиль при клике на кнопку */}\r\n            {isAuthenticated ? (\r\n              <div className=\"profile-dropdown\">\r\n                <Link to=\"/auth\" className=\"profile-button\" onClick={closeMenu}>\r\n                  <FiUser size={20} />\r\n                </Link>\r\n              </div>\r\n            ) : (\r\n              <Link \r\n                to=\"/profile\" \r\n                className=\"profile-button\"\r\n                onClick={closeMenu}\r\n                aria-label=\"Войти\"\r\n              >\r\n                <FiUser size={20} />\r\n              </Link>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}