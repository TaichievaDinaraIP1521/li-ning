{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dinat\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\lining\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [cartItems, setCartItems] = useState([]);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [orders, setOrders] = useState([]);\n  const [isAdmin, setIsAdmin] = useState(false);\n  useEffect(() => {\n    const loadData = async () => {\n      const savedCart = localStorage.getItem('cart');\n      const savedUser = localStorage.getItem('user');\n      const savedOrders = localStorage.getItem('orders');\n      if (savedCart) setCartItems(JSON.parse(savedCart));\n      if (savedUser) {\n        const userData = JSON.parse(savedUser);\n        setUser(userData);\n        setIsAuthenticated(true);\n        setIsAdmin(userData.isAdmin || false);\n      }\n      if (savedOrders) setOrders(JSON.parse(savedOrders));\n    };\n    loadData();\n  }, []);\n\n  // Авторизация\n  const login = userData => {\n    const userWithId = {\n      ...userData,\n      id: uuidv4()\n    };\n    setUser(userWithId);\n    setIsAuthenticated(true);\n    setIsAdmin(userData.isAdmin || false);\n    localStorage.setItem('user', JSON.stringify(userWithId));\n  };\n  const logout = () => {\n    setUser(null);\n    setIsAuthenticated(false);\n    setIsAdmin(false);\n    localStorage.removeItem('user');\n  };\n\n  // Корзина\n  const addToCart = product => {\n    const newCartItems = [...cartItems, {\n      ...product,\n      cartId: uuidv4()\n    }];\n    setCartItems(newCartItems);\n    localStorage.setItem('cart', JSON.stringify(newCartItems));\n  };\n  const removeFromCart = cartId => {\n    const newCartItems = cartItems.filter(item => item.cartId !== cartId);\n    setCartItems(newCartItems);\n    localStorage.setItem('cart', JSON.stringify(newCartItems));\n  };\n\n  // Заказы\n  const createOrder = () => {\n    if (!isAuthenticated || cartItems.length === 0) return null;\n    const newOrder = {\n      id: uuidv4(),\n      userId: user.id,\n      items: [...cartItems],\n      total: cartItems.reduce((sum, item) => sum + item.price, 0),\n      date: new Date().toISOString(),\n      status: 'pending'\n    };\n    const updatedOrders = [newOrder, ...orders];\n    setOrders(updatedOrders);\n    setCartItems([]);\n    localStorage.setItem('orders', JSON.stringify(updatedOrders));\n    localStorage.removeItem('cart');\n    return newOrder;\n  };\n  const updateOrderStatus = (orderId, newStatus) => {\n    if (!isAdmin) return false;\n    const updatedOrders = orders.map(order => order.id === orderId ? {\n      ...order,\n      status: newStatus\n    } : order);\n    setOrders(updatedOrders);\n    localStorage.setItem('orders', JSON.stringify(updatedOrders));\n    return true;\n  };\n\n  // Mock-функция для входа админа (временное решение)\n  const adminLogin = () => {\n    const mockAdmin = {\n      id: 1,\n      name: \"Администратор\",\n      email: \"admin@example.com\",\n      isAdmin: true,\n      avatar: \"https://i.pravatar.cc/150?u=admin\"\n    };\n    setUser(mockAdmin);\n    setIsAdmin(true);\n    setIsAuthenticated(true);\n    return mockAdmin;\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartItems,\n      addToCart,\n      removeFromCart,\n      isAuthenticated,\n      user,\n      login,\n      logout,\n      isAdmin,\n      orders: isAuthenticated ? orders.filter(o => o.userId === user.id) : [],\n      allOrders: isAdmin ? orders : [],\n      createOrder,\n      updateOrderStatus,\n      adminLogin\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"R7W35ugRwIvKVQgO44e2EAeepVw=\");\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  return useContext(CartContext);\n};\n_s2(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","v4","uuidv4","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","cartItems","setCartItems","isAuthenticated","setIsAuthenticated","user","setUser","orders","setOrders","isAdmin","setIsAdmin","loadData","savedCart","localStorage","getItem","savedUser","savedOrders","JSON","parse","userData","login","userWithId","id","setItem","stringify","logout","removeItem","addToCart","product","newCartItems","cartId","removeFromCart","filter","item","createOrder","length","newOrder","userId","items","total","reduce","sum","price","date","Date","toISOString","status","updatedOrders","updateOrderStatus","orderId","newStatus","map","order","adminLogin","mockAdmin","name","email","avatar","Provider","value","o","allOrders","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","$RefreshReg$"],"sources":["C:/Users/dinat/OneDrive/Рабочий стол/lining/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [orders, setOrders] = useState([]);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      const savedCart = localStorage.getItem('cart');\r\n      const savedUser = localStorage.getItem('user');\r\n      const savedOrders = localStorage.getItem('orders');\r\n      \r\n      if (savedCart) setCartItems(JSON.parse(savedCart));\r\n      if (savedUser) {\r\n        const userData = JSON.parse(savedUser);\r\n        setUser(userData);\r\n        setIsAuthenticated(true);\r\n        setIsAdmin(userData.isAdmin || false);\r\n      }\r\n      if (savedOrders) setOrders(JSON.parse(savedOrders));\r\n    };\r\n    loadData();\r\n  }, []);\r\n\r\n  // Авторизация\r\n  const login = (userData) => {\r\n    const userWithId = { ...userData, id: uuidv4() };\r\n    setUser(userWithId);\r\n    setIsAuthenticated(true);\r\n    setIsAdmin(userData.isAdmin || false);\r\n    localStorage.setItem('user', JSON.stringify(userWithId));\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    setIsAuthenticated(false);\r\n    setIsAdmin(false);\r\n    localStorage.removeItem('user');\r\n  };\r\n\r\n  // Корзина\r\n  const addToCart = (product) => {\r\n    const newCartItems = [...cartItems, { ...product, cartId: uuidv4() }];\r\n    setCartItems(newCartItems);\r\n    localStorage.setItem('cart', JSON.stringify(newCartItems));\r\n  };\r\n\r\n  const removeFromCart = (cartId) => {\r\n    const newCartItems = cartItems.filter(item => item.cartId !== cartId);\r\n    setCartItems(newCartItems);\r\n    localStorage.setItem('cart', JSON.stringify(newCartItems));\r\n  };\r\n\r\n  // Заказы\r\n  const createOrder = () => {\r\n    if (!isAuthenticated || cartItems.length === 0) return null;\r\n    \r\n    const newOrder = {\r\n      id: uuidv4(),\r\n      userId: user.id,\r\n      items: [...cartItems],\r\n      total: cartItems.reduce((sum, item) => sum + item.price, 0),\r\n      date: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n\r\n    const updatedOrders = [newOrder, ...orders];\r\n    setOrders(updatedOrders);\r\n    setCartItems([]);\r\n    localStorage.setItem('orders', JSON.stringify(updatedOrders));\r\n    localStorage.removeItem('cart');\r\n    \r\n    return newOrder;\r\n  };\r\n\r\n  const updateOrderStatus = (orderId, newStatus) => {\r\n    if (!isAdmin) return false;\r\n    \r\n    const updatedOrders = orders.map(order => \r\n      order.id === orderId ? { ...order, status: newStatus } : order\r\n    );\r\n    \r\n    setOrders(updatedOrders);\r\n    localStorage.setItem('orders', JSON.stringify(updatedOrders));\r\n    return true;\r\n  };\r\n\r\n\r\n\r\n// Mock-функция для входа админа (временное решение)\r\nconst adminLogin = () => {\r\n   const mockAdmin = {\r\n    id: 1,\r\n    name: \"Администратор\",\r\n    email: \"admin@example.com\",\r\n    isAdmin: true,\r\n    avatar: \"https://i.pravatar.cc/150?u=admin\"\r\n  };\r\n  setUser(mockAdmin);\r\n  setIsAdmin(true);\r\n  setIsAuthenticated(true);\r\n   return mockAdmin;\r\n};\r\n\r\n\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        cartItems,\r\n        addToCart,\r\n        removeFromCart,\r\n        isAuthenticated,\r\n        user,\r\n        login,\r\n        logout,\r\n        isAdmin,\r\n        orders: isAuthenticated ? orders.filter(o => o.userId === user.id) : [],\r\n        allOrders: isAdmin ? orders : [],\r\n        createOrder,\r\n        updateOrderStatus,\r\n        adminLogin\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCart = () => useContext(CartContext);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}