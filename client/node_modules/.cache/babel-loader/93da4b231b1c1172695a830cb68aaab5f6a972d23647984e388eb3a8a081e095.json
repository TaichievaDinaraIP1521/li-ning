{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate,useLocation}from'react-router-dom';// Страницы\nimport Home from'./pages/Home';import Products from'./pages/Products';import About from'./pages/About';import Auth from'./pages/Auth';import Cart from'./pages/Cart';import AdminPanel from'./pages/AdminPanel';import Delivery from'./pages/Delivery';import Policy from'./pages/Policy';import Profile from'./pages/Profile';import OrderSuccess from'./pages/OrderSuccess';import{useCart}from'./context/CartContext';import'./styles/main.css';import{CartProvider}from'./context/CartContext';import{PageTransition}from'./components/PageTransition';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(CartProvider,{children:/*#__PURE__*/_jsx(AppContent,{})})});}function AppContent(){const location=useLocation();const{user,isAdmin}=useCart();// Защищённый маршрут\nconst PrivateRoute=_ref=>{let{children,requiredRole=null}=_ref;if(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/auth\",replace:true,state:{from:location}});}if(requiredRole==='admin'&&!isAdmin){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}return children;};return/*#__PURE__*/_jsxs(Routes,{location:location,children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(Home,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(PrivateRoute,{requiredRole:\"admin\",children:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(AdminPanel,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/auth\",element:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(Auth,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/products\",element:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(Products,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/about\",element:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(About,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",element:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(Cart,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/delivery\",element:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(Delivery,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/policy\",element:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(Policy,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(Profile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/order-success\",element:/*#__PURE__*/_jsx(PageTransition,{children:/*#__PURE__*/_jsx(OrderSuccess,{})})})]},location.pathname);}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","useLocation","Home","Products","About","Auth","Cart","AdminPanel","Delivery","Policy","Profile","OrderSuccess","useCart","CartProvider","PageTransition","jsx","_jsx","jsxs","_jsxs","App","children","AppContent","location","user","isAdmin","PrivateRoute","_ref","requiredRole","to","replace","state","from","path","element","pathname"],"sources":["C:/Users/dinat/OneDrive/Рабочий стол/lining/client/src/App.js"],"sourcesContent":["\nimport React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate, useLocation } from 'react-router-dom';\n\n// Страницы\nimport Home from './pages/Home';\nimport Products from './pages/Products';\nimport About from './pages/About';\nimport Auth from './pages/Auth';\nimport Cart from './pages/Cart';\nimport AdminPanel from './pages/AdminPanel';\nimport Delivery from './pages/Delivery';\nimport Policy from './pages/Policy';\nimport Profile from './pages/Profile';\nimport OrderSuccess from './pages/OrderSuccess'; \nimport { useCart } from './context/CartContext';\nimport './styles/main.css';\nimport { CartProvider } from './context/CartContext';\nimport { PageTransition } from './components/PageTransition';\n\nfunction App() {\n  return (\n    <Router>\n      <CartProvider>\n        <AppContent />\n      </CartProvider>\n    </Router>\n  );\n}\n\nfunction AppContent() {\n  const location = useLocation();\n  const { user, isAdmin } = useCart();\n\n  // Защищённый маршрут\n  const PrivateRoute = ({ children, requiredRole = null }) => {\n    if (!user) {\n      return <Navigate to=\"/auth\" replace state={{ from: location }} />;\n    }\n\n    if (requiredRole === 'admin' && !isAdmin) {\n      return <Navigate to=\"/\" replace />;\n    }\n\n    return children;\n  };\n\n  return (\n    <Routes location={location} key={location.pathname}>\n      {/* Главная */}\n      <Route path=\"/\" element={\n        <PageTransition>\n          <Home />\n        </PageTransition>\n      } />\n\n      {/* Защищённый маршрут для админки */}\n      <Route path=\"/admin\" element={\n        <PrivateRoute requiredRole=\"admin\">\n          <PageTransition>\n            <AdminPanel />\n          </PageTransition>\n        </PrivateRoute>\n      } />\n\n      {/* Авторизация */}\n      <Route path=\"/auth\" element={\n        <PageTransition>\n          <Auth />\n        </PageTransition>\n      } />\n\n      {/* Продукты */}\n      <Route path=\"/products\" element={\n        <PageTransition>\n          <Products />\n        </PageTransition>\n      } />\n\n      {/* О нас */}\n      <Route path=\"/about\" element={\n        <PageTransition>\n          <About />\n        </PageTransition>\n      } />\n\n      {/* Корзина */}\n      <Route path=\"/cart\" element={\n        <PageTransition>\n          <Cart />\n        </PageTransition>\n      } />\n\n      {/* Доставка */}\n      <Route path=\"/delivery\" element={\n        <PageTransition>\n          <Delivery />\n        </PageTransition>\n      } />\n\n      {/* Политика */}\n      <Route path=\"/policy\" element={\n        <PageTransition>\n          <Policy />\n        </PageTransition>\n      } />\n\n      {/* Профиль */}\n      <Route path=\"/profile\" element={\n        <PageTransition>\n          <Profile />\n        </PageTransition>\n      } />\n\n      {/* Успешный заказ */}\n      <Route path=\"/order-success\" element={\n        <PageTransition>\n          <OrderSuccess />\n        </PageTransition>\n      } />\n    </Routes>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}